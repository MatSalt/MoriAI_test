 전략 2: 단계별 병렬 (더 체계적)

  Phase 1: 모든 페이지의 TTS + Image Gen 동시 실행
    - Page 1: TTS + Image
    - Page 2: TTS + Image
    - Page 3: TTS + Image

  Phase 2: Image Gen 완료된 페이지부터 Video Gen 시작
    - Page 1 Image 완료 → Video 시작
    - Page 2 Image 완료 → Video 시작
    - Page 3 Image 완료 → Video 시작

  🎯 제안하는 실행 전략

  저는 **전략 2 (단계별 병렬 + 스트리밍)**를 추천합니다:

  1. 모든 TTS 요청을 한 번에 보냄 (TTS API 명세에 맞게)
     - Input: [
         ["옛날에...", "응애응애"],
         ["아기는...", "멍멍!"],
         ["너무...", "하하하"]
       ]
     - 한 번의 API 호출로 모든 오디오 생성

  2. 모든 Image Gen을 병렬로 실행
     - Page 1 Image Gen (대사1 + img1) ─┐
     - Page 2 Image Gen (대사2 + img2) ─┤ 동시 실행
     - Page 3 Image Gen (대사3 + img3) ─┘

  3. Image가 완료되는 대로 Video Gen 시작
     - Page 1 Image 완료 → 즉시 Video Gen 시작
     - Page 2 Image 완료 → 즉시 Video Gen 시작
     - Page 3 Image 완료 → 즉시 Video Gen 시작

     (먼저 완료된 것부터 Video 생성 시작)

  이 전략의 장점:

  1. TTS 최적화: 한 번의 API 호출로 모든 오디오 생성
  2. Image 병렬: 3개 페이지의 이미지를 동시에 생성
  3. Video 스트리밍: Image 완료를 기다리지 않고 준비되는 대로 Video 생성 시작
  4. 에러 격리: 한 페이지 실패가 다른 페이지에 영향 없음

  🤔 구체적인 실행 흐름 예시

  시간 0초:
  - TTS API 호출 (모든 페이지)
  - Image Gen 시작 (Page 1, 2, 3 동시)

  시간 5초:
  - TTS 완료 → 모든 오디오 파일 경로 받음
  - Image Gen 진행 중...

  시간 10초:
  - Page 2 Image 완료! → 즉시 Page 2 Video Gen 시작

  시간 12초:
  - Page 1 Image 완료! → 즉시 Page 1 Video Gen 시작

  시간 15초:
  - Page 3 Image 완료! → 즉시 Page 3 Video Gen 시작
  - Page 2 Video 완료! → Page 2 완성

  시간 18초:
  - Page 1 Video 완료! → Page 1 완성

  시간 20초:
  - Page 3 Video 완료! → Page 3 완성
  - 모든 페이지 완료 → Book 완성

  📊 데이터 흐름도

  ┌─────────────────────────────────────────┐
  │  Input: diaries + images (1:1 매칭)     │
  └──────────────┬──────────────────────────┘
                 ↓
  ┌──────────────────────────────────────────┐
  │  LLM: 스토리 생성                         │
  │  Output: List[List[str]] (대사들)        │
  └──────────────┬───────────────────────────┘
                 ↓
       ┌─────────┴─────────┐
       ↓                   ↓
  ┌─────────────┐    ┌──────────────────┐
  │  TTS API    │    │  Image Gen API   │
  │  (한번에)   │    │  (페이지별 병렬)  │
  │             │    │                  │
  │  Result:    │    │  Page 1 + img1 ──┐
  │  모든 오디오 │    │  Page 2 + img2 ──┼─→ 병렬 실행
  │  경로들     │    │  Page 3 + img3 ──┘
  └─────────────┘    └────┬─┬─┬─────────┘
                          ↓ ↓ ↓
                     각 이미지 완료되는 대로
                          ↓ ↓ ↓
                     ┌────────────┐
                     │ Video Gen  │
                     │ (순차 시작, │
                     │  병렬 진행) │
                     └──────┬─────┘
                            ↓
                     ┌────────────┐
                     │    Book    │
                     │   완성!    │
                     └────────────┘
